<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS reduce()</title>
</head>

<body>
    <script>
        // reduce()
        // - 배열의 모든 요소를 순회
        // - 하나의 값으로 누적하는 메서드
        /* 
            arr.reduce((누적값, 현재값, 인덱스, 원본배열) => {
                // 실행 로직
                return 새로운누적값;
            }, 초기값);
        */

        const numbers = [1, 2, 3, 4];
        // 배열.reduce((누적값, 현재값) => acc + cur, 초기값);
        const sum = numbers.reduce((acc, cur) => acc + cur, 0);
        console.log(sum); // 10

        // 배열 내에 중복 요소 개수 세기
        const fruits = ['apple', 'banana', 'apple', 'orange', 'banana'];

        const count = fruits.reduce((acc, fruit) => {
            acc[fruit] = (acc[fruit] || 0) + 1;
            return acc;
        }, {});

        console.log(count);
        // { apple: 2, banana: 2, orange: 1 }

        // 2차원 배열 → 1차원 배열 (평탄화)
        const arr = [[1, 2], [3, 4], [5]];
        const flat = arr.reduce((acc, cur) => acc.concat(cur), []);
        console.log(flat); // [1, 2, 3, 4, 5]

        
        const cart = [
            { name: 'Keyboard', price: 30000, qty: 2 },
            { name: 'Mouse', price: 15000, qty: 1 }
        ];

        const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
        console.log(total); // 75000
    </script>
</body>

</html>